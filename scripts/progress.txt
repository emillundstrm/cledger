# Ralph Progress Log
Started: Sun Feb  1 09:54:56 CET 2026

## Codebase Patterns
- Gradle wrapper uses Gradle 8.7 (8.14.4 has download issues with Java 17 SSL)
- Backend uses 4-space indentation for Java code (per ARCHITECTURE.md)
- Test profile uses H2 in-memory DB with Flyway disabled and ddl-auto: create-drop
- Test resources at backend/src/test/resources/application.yml override main config
- Frontend uses Node 20 via nvm (nvm use 20); npm is not on PATH without nvm
- Frontend uses Tailwind CSS v4 with @tailwindcss/vite plugin (no tailwind.config.js needed)
- ShadCN v3 with Tailwind v4 uses CSS variables in src/index.css for theming
- Import alias @/ maps to src/ via tsconfig paths and vite resolve alias
- Vitest config is in separate vitest.config.ts (not merged into vite.config.ts)
- Frontend uses 4-space indentation (matches backend convention)
- Session entity uses public no-arg constructor (not protected) so tests can instantiate directly
- @ElementCollection with @CollectionTable maps session_types and session_pain_flags tables
- @DataJpaTest is the right annotation for repository-only tests (auto-configures H2 + JPA)
---

## 2026-02-01 - US-001
- What was implemented: Spring Boot 3.5.0 backend project scaffold with Gradle build
- Files changed:
  - backend/ (entire project scaffold from Spring Initializr)
  - backend/build.gradle - Spring Web, Data JPA, PostgreSQL, Flyway, H2 (test)
  - backend/src/main/resources/application.yml - PostgreSQL config (localhost:5432/cledger)
  - backend/src/main/java/com/cledger/controller/HealthController.java - GET /api/health
  - backend/src/test/java/com/cledger/controller/HealthControllerTest.java - WebMvcTest for health endpoint
  - backend/src/test/resources/application.yml - H2 test config
- **Learnings for future iterations:**
  - Spring Initializr now requires Boot 3.5.0+ (3.4.x no longer available)
  - Gradle 8.14.4 download fails with Java 17 SSL issues; using 8.7 from cache works
  - @WebMvcTest is preferred for controller-only tests (no DB needed)
  - CledgerApplicationTests with @SpringBootTest uses H2 for context loading tests
---

## 2026-02-01 - US-002
- What was implemented: React frontend project with Vite, TypeScript, Tailwind CSS v4, and ShadCN UI
- Files changed:
  - frontend/ (entire Vite + React + TypeScript scaffold)
  - frontend/vite.config.ts - Tailwind v4 plugin, path alias, /api proxy to localhost:8080
  - frontend/vitest.config.ts - Vitest config with jsdom environment
  - frontend/tsconfig.json - Added @/ path alias
  - frontend/tsconfig.app.json - Added @/ path alias
  - frontend/src/index.css - Tailwind v4 import with ShadCN theme variables
  - frontend/src/App.tsx - Placeholder page with CLedger title
  - frontend/src/App.test.tsx - Basic render tests
  - frontend/src/test/setup.ts - Vitest setup with jest-dom matchers
  - frontend/src/lib/utils.ts - ShadCN utility (cn function)
  - frontend/components.json - ShadCN configuration
- **Learnings for future iterations:**
  - Tailwind v4 uses @import "tailwindcss" instead of @tailwind directives
  - ShadCN init requires import alias configured in tsconfig before running
  - Use `npx shadcn@latest init -d` for default ShadCN setup
  - Vitest v4 works with separate vitest.config.ts using vitest/config defineConfig
  - Must load nvm before any npm/npx command: `export NVM_DIR="$HOME/.nvm" && . "$NVM_DIR/nvm.sh" && nvm use 20`
---

## 2026-02-01 - US-003
- What was implemented: Database schema for training sessions with Flyway migration, JPA entity, and Spring Data repository
- Files changed:
  - backend/src/main/resources/db/migration/V1__create_sessions_tables.sql - Flyway migration for sessions, session_types, session_pain_flags tables
  - backend/src/main/java/com/cledger/entity/Session.java - JPA entity with @ElementCollection for types and pain flags
  - backend/src/main/java/com/cledger/repository/SessionRepository.java - Spring Data JPA repository
  - backend/src/test/java/com/cledger/repository/SessionRepositoryTest.java - Repository tests (save, retrieve, delete with element collections)
- **Learnings for future iterations:**
  - Session entity constructor must be public (not protected) for test instantiation
  - @DataJpaTest auto-configures H2 + JPA for repository tests without needing @SpringBootTest
  - @ElementCollection with @CollectionTable correctly maps join tables (session_types, session_pain_flags)
  - @PrePersist/@PreUpdate callbacks handle created_at/updated_at automatically
---
